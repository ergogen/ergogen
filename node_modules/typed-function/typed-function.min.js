"use strict";!function(n,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():n.typed=t()}(this,function(){function d(){return!0}function fn(){return!1}function pn(){}return function n(){var t=[{name:"number",test:function(n){return"number"==typeof n}},{name:"string",test:function(n){return"string"==typeof n}},{name:"boolean",test:function(n){return"boolean"==typeof n}},{name:"Function",test:function(n){return"function"==typeof n}},{name:"Array",test:Array.isArray},{name:"Date",test:function(n){return n instanceof Date}},{name:"RegExp",test:function(n){return n instanceof RegExp}},{name:"Object",test:function(n){return"object"==typeof n&&null!==n&&n.constructor===Object}},{name:"null",test:function(n){return null===n}},{name:"undefined",test:function(n){return void 0===n}}],e={name:"any",test:d},r=[],a=[],B={types:t,conversions:a,ignore:r};function f(t){var n=un(B.types,function(n){return n.name===t});if(n)return n;if("any"===t)return e;var r=un(B.types,function(n){return n.name.toLowerCase()===t.toLowerCase()});throw new TypeError('Unknown type "'+t+'"'+(r?'. Did you mean "'+r.name+'"?':""))}function p(n){return n===e?999:B.types.indexOf(n)}function G(t){var n=un(B.types,function(n){return n.test(t)});if(n)return n.name;throw new TypeError("Value has unknown type. Value: "+t)}function H(n){return n.map(function(n){var t=n.types.map(o);return(n.restParam?"...":"")+t.join("|")}).join(",")}function J(n,r){var t,e,a=0===n.indexOf("..."),o=(a?3<n.length?n.slice(3):"any":n).split("|").map(rn).filter(h).filter(g),i=(t=o,e={},r.forEach(function(n){-1!==t.indexOf(n.from)||-1===t.indexOf(n.to)||e[n.from]||(e[n.from]=n)}),Object.keys(e).map(function(n){return e[n]})),u=o.map(function(n){var t=f(n);return{name:n,typeIndex:p(t),test:t.test,conversion:null,conversionIndex:-1}}),s=i.map(function(n){var t=f(n.from);return{name:n.from,typeIndex:p(t),test:t.test,conversion:n,conversionIndex:r.indexOf(n)}});return{types:u.concat(s),restParam:a}}function K(n){var t=u(n);return!!t&&t.restParam}function Q(n){return n.types.some(function(n){return null!=n.conversion})}function W(n){if(n&&0!==n.types.length){if(1===n.types.length)return f(n.types[0].name).test;if(2===n.types.length){var t=f(n.types[0].name).test,r=f(n.types[1].name).test;return function(n){return t(n)||r(n)}}var e=n.types.map(function(n){return f(n.name).test});return function(n){for(var t=0;t<e.length;t++)if(e[t](n))return!0;return!1}}return d}function X(n){var r,t,e,a;if(K(n)){var o=(r=(a=n).slice(0,a.length-1).map(W)).length,i=W(u(n));return function(n){for(var t=0;t<r.length;t++)if(!r[t](n[t]))return!1;return function(n){for(var t=o;t<n.length;t++)if(!i(n[t]))return!1;return!0}(n)&&n.length>=o+1}}return 0===n.length?function(n){return 0===n.length}:1===n.length?(t=W(n[0]),function(n){return t(n[0])&&1===n.length}):2===n.length?(t=W(n[0]),e=W(n[1]),function(n){return t(n[0])&&e(n[1])&&2===n.length}):(r=n.map(W),function(n){for(var t=0;t<r.length;t++)if(!r[t](n[t]))return!1;return n.length===r.length})}function Y(n,t){return t<n.params.length?n.params[t]:K(n.params)?u(n.params):null}function s(n,t,r){var e=Y(n,t);return(e?r?e.types.filter(c):e.types:[]).map(o)}function o(n){return n.name}function c(n){return null===n.conversion||void 0===n.conversion}function Z(n,t){var r=function(n){for(var t={},r=0;r<n.length;r++)t[n[r]]=!0;return Object.keys(t)}(sn(n,function(n){return s(n,t,!1)}));return-1!==r.indexOf("any")?["any"]:r}function m(n){for(var t=999,r=0;r<n.types.length;r++)c(n.types[r])&&(t=Math.min(t,n.types[r].typeIndex));return t}function l(n){for(var t=999,r=0;r<n.types.length;r++)c(n.types[r])||(t=Math.min(t,n.types[r].conversionIndex));return t}function $(n,t){var r,e,a,o,i=Math.min(n.params.length,t.params.length),u=n.params.some(Q)-t.params.some(Q);if(0!==u)return u;for(r=0;r<i;r++)if(0!=(u=Q(n.params[r])-Q(t.params[r])))return u;for(r=0;r<i;r++)if(e=n.params[r],a=t.params[r],o=void 0,0!==(u=0!=(o=e.restParam-a.restParam)||0!=(o=Q(e)-Q(a))||0!=(o=m(e)-m(a))?o:l(e)-l(a)))return u;return n.params.length-t.params.length}function _(n){var t,r,e,a,o=[],i=[];switch(n.types.forEach(function(n){n.conversion&&(o.push(f(n.conversion.from).test),i.push(n.conversion.convert))}),i.length){case 0:return function(n){return n};case 1:return t=o[0],e=i[0],function(n){return t(n)?e(n):n};case 2:return t=o[0],r=o[1],e=i[0],a=i[1],function(n){return t(n)?e(n):r(n)?a(n):n};default:return function(n){for(var t=0;t<i.length;t++)if(o[t](n))return i[t](n);return n}}}function nn(n,u){return function t(r,e,a){if(e<r.length){var n,o=r[e],i=u?o.types.filter(c):o.types;return sn(o.restParam?(n=i.filter(c)).length<i.length?[n,i]:[i]:i.map(function(n){return[n]}),function(n){return t(r,e+1,a.concat([n]))})}return[a.map(function(n,t){return{types:n,restParam:t===r.length-1&&K(r)}})]}(n,0,[])}function tn(n,t){for(var r=Math.max(n.params.length,t.params.length),e=0;e<r;e++)if(!function(n,t){for(var r=0;r<n.length;r++)if(function(n,t){return-1!==n.indexOf(t)}(t,n[r]))return 1}(s(n,e,!0),s(t,e,!0)))return!1;var a=n.params.length,o=t.params.length,i=K(n.params),u=K(t.params);return i?u?a===o:a<=o:u?o<=a:a===o}function i(t,o){if(0===Object.keys(o).length)throw new SyntaxError("No signatures provided");var r=[];Object.keys(o).map(function(n){return r=o[t=n],a=B.conversions,e=[],""!==t.trim()&&(e=t.split(",").map(rn).map(function(n,t,r){var e=J(n,a);if(e.restParam&&t!==r.length-1)throw new SyntaxError('Unexpected rest parameter "'+n+'": only allowed for the last parameter');return e})),e.some(an)?null:{params:e,fn:r};var t,r,a,e}).filter(en).forEach(function(t){var n=un(r,function(n){return tn(n,t)});if(n)throw new TypeError('Conflicting signatures "'+H(n.params)+'" and "'+H(t.params)+'".');r.push(t)});var e=sn(r,function(t){return(t?nn(t.params,!1):[]).map(function(n){return{params:n,fn:t.fn}})}).filter(en);function a(){for(var n=q;n<z;n++)if(g[n](arguments))return A[n].apply(this,arguments);throw function(n,r,t){for(var e,a=n||"unnamed",o=t,i=0;i<r.length;i++){var u=o.filter(function(n){var t=W(Y(n,i));return(i<n.params.length||K(n.params))&&t(r[i])});if(0===u.length){if(0<(e=Z(o,i)).length){var s,f=G(r[i]);return(s=new TypeError("Unexpected type of argument in function "+a+" (expected: "+e.join(" or ")+", actual: "+f+", index: "+i+")")).data={category:"wrongType",fn:a,index:i,actual:f,expected:e},s}}else o=u}var p=o.map(function(n){return K(n.params)?1/0:n.params.length});if(r.length<Math.min.apply(null,p))return e=Z(o,i),(s=new TypeError("Too few arguments in function "+a+" (expected: "+e.join(" or ")+", index: "+r.length+")")).data={category:"tooFewArgs",fn:a,index:r.length,expected:e},s;var c=Math.max.apply(null,p);return r.length>c?(s=new TypeError("Too many arguments in function "+a+" (expected: "+c+", actual: "+r.length+")")).data={category:"tooManyArgs",fn:a,index:r.length,expectedLength:c}:(s=new TypeError('Arguments of type "'+r.join(", ")+'" do not match any of the defined signatures of function '+a+".")).data={category:"mismatch",actual:r.map(G)},s}(t,arguments,e)}function i(n,t){return arguments.length===D&&h(n)&&E(t)?F.apply(i,arguments):arguments.length===L&&y(n)&&j(t)?M.apply(i,arguments):arguments.length===U&&v(n)&&O(t)?k.apply(i,arguments):arguments.length===R&&d(n)&&b(t)?I.apply(i,arguments):arguments.length===V&&w(n)&&T(t)?C.apply(i,arguments):arguments.length===N&&x(n)&&P(t)?S.apply(i,arguments):a.apply(i,arguments)}e.sort($);var u,n=e[0]&&e[0].params.length<=2&&!K(e[0].params),s=e[1]&&e[1].params.length<=2&&!K(e[1].params),f=e[2]&&e[2].params.length<=2&&!K(e[2].params),p=e[3]&&e[3].params.length<=2&&!K(e[3].params),c=e[4]&&e[4].params.length<=2&&!K(e[4].params),m=e[5]&&e[5].params.length<=2&&!K(e[5].params),l=n&&s&&f&&p&&c&&m,g=e.map(function(n){return X(n.params)}),h=n?W(e[0].params[0]):fn,y=s?W(e[1].params[0]):fn,v=f?W(e[2].params[0]):fn,d=p?W(e[3].params[0]):fn,w=c?W(e[4].params[0]):fn,x=m?W(e[5].params[0]):fn,E=n?W(e[0].params[1]):fn,j=s?W(e[1].params[1]):fn,O=f?W(e[2].params[1]):fn,b=p?W(e[3].params[1]):fn,T=c?W(e[4].params[1]):fn,P=m?W(e[5].params[1]):fn,A=e.map(function(n){return function(n,e){var a,o,t=e;n.some(Q)&&(a=K(n),o=n.map(_),t=function(){for(var n=[],t=a?arguments.length-1:arguments.length,r=0;r<t;r++)n[r]=o[r](arguments[r]);return a&&(n[t]=arguments[t].map(o[t])),e.apply(this,n)});var r,i=t;return K(n)&&(r=n.length-1,i=function(){return t.apply(this,on(arguments,0,r).concat([on(arguments,r)]))}),i}(n.params,n.fn)}),F=n?A[0]:pn,M=s?A[1]:pn,k=f?A[2]:pn,I=p?A[3]:pn,C=c?A[4]:pn,S=m?A[5]:pn,D=n?e[0].params.length:-1,L=s?e[1].params.length:-1,U=f?e[2].params.length:-1,R=p?e[3].params.length:-1,V=c?e[4].params.length:-1,N=m?e[5].params.length:-1,q=l?6:0,z=e.length;try{Object.defineProperty(i,"name",{value:t})}catch(n){}return i.signatures=(u={},e.forEach(function(t){t.params.some(Q)||nn(t.params,!0).forEach(function(n){u[H(n)]=t.fn})}),u),i}function g(n){return-1===B.ignore.indexOf(n)}function rn(n){return n.trim()}function h(n){return!!n}function en(n){return null!==n}function an(n){return 0===n.types.length}function u(n){return n[n.length-1]}function on(n,t,r){return Array.prototype.slice.call(n,t,r)}function un(n,t){for(var r=0;r<n.length;r++)if(t(n[r]))return n[r]}function sn(n,t){return Array.prototype.concat.apply([],n.map(t))}function y(n){for(var t="",r=0;r<n.length;r++){var e=n[r];if(("object"==typeof e.signatures||"string"==typeof e.signature)&&""!==e.name)if(""===t)t=e.name;else if(t!==e.name){var a=new Error("Function names do not match (expected: "+t+", actual: "+e.name+")");throw a.data={actual:e.name,expected:t},a}}return t}function v(n){var r,e={};function t(n,t){if(e.hasOwnProperty(n)&&t!==e[n])throw(r=new Error('Signature "'+n+'" is defined twice')).data={signature:n},r}for(var a=0;a<n.length;a++){var o=n[a];if("object"==typeof o.signatures)for(var i in o.signatures)o.signatures.hasOwnProperty(i)&&(t(i,o.signatures[i]),e[i]=o.signatures[i]);else{if("string"!=typeof o.signature)throw(r=new TypeError("Function is no typed-function (index: "+a+")")).data={index:a},r;t(o.signature,o),e[o.signature]=o}}return e}return(B=i("typed",{"string, Object":i,Object:function(n){var t=[];for(var r in n)n.hasOwnProperty(r)&&t.push(n[r]);return i(y(t),n)},"...Function":function(n){return i(y(n),v(n))},"string, ...Function":function(n,t){return i(n,v(t))}})).create=n,B.types=t,B.conversions=a,B.ignore=r,B.convert=function(n,t){var r=G(n);if(t===r)return n;for(var e=0;e<B.conversions.length;e++){var a=B.conversions[e];if(a.from===r&&a.to===t)return a.convert(n)}throw new Error("Cannot convert from "+r+" to "+t)},B.find=function(n,t){if(!n.signatures)throw new TypeError("Function is no typed-function");var r;if("string"==typeof t){r=t.split(",");for(var e=0;e<r.length;e++)r[e]=r[e].trim()}else{if(!Array.isArray(t))throw new TypeError("String array or a comma separated string expected");r=t}var a=r.join(","),o=n.signatures[a];if(o)return o;throw new TypeError("Signature not found (signature: "+(n.name||"unnamed")+"("+r.join(", ")+"))")},B.addType=function(n,t){if(!n||"string"!=typeof n.name||"function"!=typeof n.test)throw new TypeError("Object with properties {name: string, test: function} expected");if(!1!==t)for(var r=0;r<B.types.length;r++)if("Object"===B.types[r].name)return void B.types.splice(r,0,n);B.types.push(n)},B.addConversion=function(n){if(!n||"string"!=typeof n.from||"string"!=typeof n.to||"function"!=typeof n.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");B.conversions.push(n)},B}()});